<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:bf="http://bookstore/facelets">

    <body>        
        <ui:composition template="./templates/masterTemplate.xhtml">

            <ui:define name="title">
                Order History
            </ui:define>

            <ui:define name="event_listener">
                <f:metadata>
                    <f:event listener="#{orderController.getAllOrdersForCurrentUser}" type="preRenderView" /> 
                </f:metadata>
            </ui:define>

            <ui:define name="content">

                <div class="callout large primary">
                    <div class="row column text-center">
                        <h1>Your Orders</h1>
                    </div>
                </div>
                <div class="row" id="content">
                    <div class="medium-8 columns">
                        <ui:repeat value="#{orderController.getAllOrdersForCurrentUser()}" var="order">
                            <div class="blog-post">
                                <h3>Order Placed  <small>#{order.saleDate}</small></h3>
                                <div class="callout">
                                    <img class="thumbnail" src="resources/images/#{order.detailsForThisOrder.get(0).book.isbn}_s.jpg"></img>
                                    <ul class="menu simple">
                                        <li>Book Name:<a href="#"> #{order.detailsForThisOrder.get(0).book.title}</a></li><br/>
                                        <li>isbn:<a href="#"> #{order.detailsForThisOrder.get(0).book.isbn}</a></li><br/>
                                        <li>Author:<a href="#"> #{order.detailsForThisOrder.get(0).book.authorList.get(0)}</a></li><br/>
                                        <li>Purchaser:<a href="#"> #{order.clientName}</a></li><br/>
                                    </ul>
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td>Net Total</td>
                                                <td>#{order.netTotal}</td>
                                            </tr>
                                            <tr>
                                                <td>PST</td>
                                                <td>#{order.totalPst}</td>
                                            </tr>
                                            <tr>
                                                <td>GST</td>
                                                <td>#{order.totalGst}</td>
                                            </tr>
                                            <tr>
                                                <td>HST</td>
                                                <td>#{order.totalHst}</td>
                                            </tr>
                                            <tr>
                                                <td>Gross Total</td>
                                                <td>#{order.grossTotal}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </ui:repeat>
                        <div class="blog-post">
                            <h3>Order Placed <small>3/6/2015</small></h3>
                            <img class="thumbnail" src="http://placehold.it/850x350"></img>
                            <p>Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus condimentum laoreet. Nunc eu ullamcorper orci. Quisque eget odio ac lectus vestibulum faucibus eget in metus. In pellentesque faucibus vestibulum. Nulla at nulla justo, eget luctus.</p>
                            <div class="callout">
                                <ul class="menu simple">
                                    <li><a href="#">Author: Mike Mikers</a></li>
                                    <li><a href="#">Comments: 3</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="blog-post">
                            <h3>Awesome blog post title <small>3/6/2015</small></h3>
                            <img class="thumbnail" src="http://placehold.it/850x350"></img>
                            <p>Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus condimentum laoreet. Nunc eu ullamcorper orci. Quisque eget odio ac lectus vestibulum faucibus eget in metus. In pellentesque faucibus vestibulum. Nulla at nulla justo, eget luctus.</p>
                            <div class="callout">
                                <ul class="menu simple">
                                    <li><a href="#">Author: Mike Mikers</a></li>
                                    <li><a href="#">Comments: 3</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="blog-post">
                            <h3>Awesome blog post title <small>3/6/2015</small></h3>
                            <img class="thumbnail" src="http://placehold.it/850x350"></img>
                            <p>Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus condimentum laoreet. Nunc eu ullamcorper orci. Quisque eget odio ac lectus vestibulum faucibus eget in metus. In pellentesque faucibus vestibulum. Nulla at nulla justo, eget luctus.</p>
                            <div class="callout">
                                <ul class="menu simple">
                                    <li><a href="#">Author: Mike Mikers</a></li>
                                    <li><a href="#">Comments: 3</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="medium-3 columns" data-sticky-container="">
                        <div class="sticky" data-sticky="" data-anchor="content">
                            <h4>Categories</h4>
                            <ul>
                                <li><a href="#">Skyler</a></li>
                                <li><a href="#">Jesse</a></li>
                                <li><a href="#">Mike</a></li>
                                <li><a href="#">Holly</a></li>
                            </ul>
                            <h4>Authors</h4>
                            <ul>
                                <li><a href="#">Skyler</a></li>
                                <li><a href="#">Jesse</a></li>
                                <li><a href="#">Mike</a></li>
                                <li><a href="#">Holly</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row column">
                    <ul class="pagination" role="navigation" aria-label="Pagination">
                        <li class="disabled">Previous</li>
                        <li class="current"><span class="show-for-sr">You're on page</span> 1</li>
                        <li><a href="#" aria-label="Page 2">2</a></li>
                        <li><a href="#" aria-label="Page 3">3</a></li>
                        <li><a href="#" aria-label="Page 4">4</a></li>
                        <li class="ellipsis"></li>
                        <li><a href="#" aria-label="Page 9">9</a></li>
                        <li><a href="#" aria-label="Page 10">10</a></li>
                        <li><a href="#" aria-label="Next page">Next</a></li>
                    </ul>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>

